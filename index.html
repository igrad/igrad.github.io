<!DOCTYPE HTML>
<html>

<head>
   <meta charset="UTF-8">
   <title>Ian Gradert</title>

   <link rel="stylesheet" href="css/index.css">
   <link rel="stylesheet" href="css/main.css">
   <link rel="stylesheet" href="css/body.css">

   <script
   src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js">
   </script>
</head>

<body>
   <div id="frame_welcome" class="pageframe">
      <div id="welcome_container">
         <a id="welcome_msg">Hi, I'm Ian.</a>
      </div>
      <div id="joke1" next="joke2" set="false" class="joke_btn">&#62;</div>
      <div id="joke2" next="joke3" set="false" class="joke_btn">and</div>
      <div id="joke3" next="joke4" set="false" class="joke_btn">I'm</div>
      <div id="joke4" next="joke5" set="false" class="joke_btn">good</div>
      <div id="joke5" next="joke6" set="false" class="joke_btn">at</div>
      <div id="joke6" next="joke7" set="false" class="joke_btn">designing</div>
      <div id="joke7" next="joke8" set="false" class="joke_btn">things</div>
      <div id="joke8" set="false" onclick="PassWelcome();"
      class="joke_btn">&#62;</div>
   </div>

   <div id="frame_main" class="pageframe">
      <div id="shelf_wrapper">
         <div id="shelf">

            <div id="name" class="shelfglow" onmouseup="GoToHome();">
               <div id="name_inner">Ian Gradert</div>
            </div>

            <div id="menu">
               <div class="menu_btn_container shelfglow">
                  <div id="menu_posts" class="menu_btn" onmouseup="GoToPosts();">
                     Posts
                  </div>
               </div>
               <div class="menu_btn_container shelfglow">
                  <div id="menu_projects" class="menu_btn" onmouseup="GoToProjects();">
                     Projects
                  </div>
               </div>
               <div class="menu_btn_container shelfglow">
                  <div id="menu_resume" class="menu_btn" onmouseup="GoToResume();">
                     Resume
                  </div>
               </div>
            </div>

         </div>
      </div>


      <div id="body_wrapper">

         <div id="body_home" class="body_container">

         </div>

         <div id="body_posts" class="body_container">
            <div id="posts_index" class="bodydiv">
               1.
               <br/>
               2.
               <br/>
               3.
            </div>

            <div id="posts_body" class="bodydiv">
               Lorem ipsum boogie bang
            </div>
         </div>

         <div id="body_projects" class="body_container">
         </div>

         <div id="body_resume" class="body_container">
         </div>

      </div>

      <div id="pad_left" class="pad"></div>
      <div id="pad_right" class="pad"></div>

   </div>

   <script>
      $(document).ready(function() {
         // Pivot element
         var pivot = false;

         $(".joke_btn").mouseenter(function() {
            if ($(this).attr("set") == "false") {
               // Little lambda to avoid syntax hell
               var getProp = (itemID, prop) => {
                  return parseInt($(itemID).css(prop));
               };

               console.log("Doing stuff");
   				// Helper vars
               var next = $("#" + $(this).attr("next"));
               var nextid = "#" + next.attr("id");
               var me = $(this);
               var id = "#" + me.attr("id");
               var myWidth = getProp(id, "width") +
                  2 * getProp(id, "padding-left") +
                  2 * getProp(id, "border-left-width");
               next.css("display", "block");

   				// Left edge X coord of the next node (prediction)
   				var nextLeft = me.position().left + myWidth;

   				// Right edge X coord of next node (prediction)
   				var nextRight = nextLeft + getProp(nextid, "width");

   				// Set horizontal edge
               if (!pivot) {
                  next.css("left", me.position().left + myWidth);
               } else {
                  next.css("left", me.position().left);
               }

               // Set vertical edge
               if (pivot) {
                  console.log("pivot1");
   					next.css("top", getProp(id, "top") + myWidth);
               } else {
                  console.log("else...");
   					next.css("top", getProp(id, "top"));
   				}

               if (nextRight > getProp("body", "width") * 0.95) {
                  // If the predicted right edge is OOB on X,
                  // rotate by 90 degrees
                  console.log("OOB");
                  if (!pivot) pivot = true;
                  next.addClass("joke90");
               }

               $(this).attr("set", "true");
            }
         });

         $(".shelfglow").hover(function() {
            $(this).css("box-shadow", "0px 1px white");
         }, function () {
            $(this).css("box-shadow", "0px 1px gray");
         });
      });

      function PassWelcome() {
         $("#frame_main").css("display", "grid");
         $("#frame_main").css("opacity", "0.00");

         $("#frame_welcome").animate({
            opacity: 0.00
         }, 200, function () {
            $("#frame_welcome").css("display", "none");
         });

         $("#frame_main").animate({
            opacity: 1.00
         }, 200);
      };

      function GoToHome() {
         $(".body_container").css("display", "none");
         $("#body_home").css("display", "block");
      }

      function GoToPosts() {
         $(".body_container").css("display", "none");
         $("#body_posts").css("display", "grid");
      }

      function GoToProjects() {
         $(".body_container").css("display", "none");
         $("#body_projects").css("display", "block");
      }

      function GoToResume() {
         $(".body_container").css("display", "none");
         $("#body_resume").css("display", "block");
      }
   </script>
</body>

</html>
